# Frequently Asked Questions

### How to build
Go to src directory and `make`. It should build the tool and build an example user program and run it.

### How do I specify the name of the class to be used as secure datatype?
When our build tool (CGT) generates classes, it reads a user-provided configuration file (default cgt.cfg). This file defines types that are to be used in the program. For example, basename __`Secure`__ defines three classes __SecureInt__ , __SecureUint__ , and __SecureBool__ .

### How do I use the new datatypes in my code?
The classes generated are templates with the template argument being the size of the plaintext. The type in the program can be used as
```
SecureInt<32> x;
```

### What do I include? 
Your program must include 
```
#include "e3int.h"
```

### What are the types? 
Three basic integral types are generated by our tool: __int__, __unsigned__, and __bool__. Their names are constructed from the basename specified in the configuration file by adding suffixes __Int__, __Uint__, and __Bool__ correspondingly.

### Which C++ operators are supported in E3?
All standard operators are available to the user when using encrypted variables. Table below summarizes the C++14 operators, classfied into five groups:

<p  align="center">
    <img src="./table_c++_operators.png" width="600">
</p>

**Non-applicable**: This group consists of member and structure reference/dereference operators, as well as function call and scope resolution. These operators are not intended to be defined for `SecureInt`.  
**Unchanged**: These operators retain their native default semantics.  
**Overloaded**: These operators are overloaded for `SecureInt`. The class defines these operators, which in turn call the appropriate functions corresponding to the semantics of unencrypted data. Some class operations do not require manipulation on encrypted data: copy, expanding/shrinking of number of bits. These operators are implemented purely at a high-level without calling circuit functions, and appear in the 'Implemented in C++' category. All the other overloaded operations (e.g. `a+b`) require calls to *functions implementing Boolean circuits using FHE-evaluated gates* (dubbed "FHE circuits"). These operators can be further classified into two categories: 'Direct', which actually calls FHE circuit functions; and 'Indirect', which do not call sunch functions directly but are expressed using Direct operators. 

### Do I need to change my PATH?
No. But, in Windows environment, you need to set up the environment variables (PATH, INCLUDE, LIB) manually.

### A simple full working example
Configuration file (cgt.cfg)
```
MyType : native
{
	postfix = EN
	postneg = ENn
}
```

Program file
```cpp
 #include <iostream>
 #include "e3int.h"

 using Secure = MyTypeInt<32>;
 Secure f(Secure x, Secure y){ return x + y; }

 int main()
 {
     Secure x = _7_EN, y = _3_ENn;
     y = f(x, y);
     std::cout << x << ' ' << y << "\n";
 }
```

### How to compile and run an example?
The easiest way to compile is to do the following 3 steps. Inside e3/src:
1. Build __cgt.exe__
```
 make cgt.exe
```
2. Generate __secint__ classes. This creates 3 files: .h .cpp .inc
```
 ./cgt.exe gen -c cgt.cfg
```
3. Build the user code
```
 make bob.exe USER=cpp_user
```

By default __make__ does all three steps above with the default options:
'USER=[user program directory]'. They can be left out in the above
steps, but are shown for completeness. To use different configuration file
and different user code, just use different cfg file name and user directory name.

### I try to compile the sample code and I get the following error:

  test.cpp:2:20: fatal error: e3int.h: No such file or directory
  compilation terminated.

Header e3int.h is located in e3/src. However, just the placing `test.cpp`
into e3/src is not enough - secure classes has to be generataed by __`cgt`__.

### Why should I use __`cgt`__?

The user's binary is built out of following elements:
1. User's code
2. Generated classes
3. Shared code
4. Additional 3rd party encryption libraries

Generated classes depend on the user's code and selected encryption scheme which is
defined in the configuration file. The tool __`cgt`__ reads the user's code,
reads the configuration file, and then generates appropriate classes. Only
when the generated classes are built, then the user's code can be compiled
to the binary.

<!-- #### What is test.cpp? How do you try to compile?

moma@momavm:~/momalab/e3$ cat test.cpp

#include <iostream>

#include "e3int.h"

using Secure = MyTypeInt<32>;

Secure f(Secure x, Secure y){ return x + y; }

 int main()
 {
     Secure x = _7_EN, y = _3_ENn;
     y = f(x, y);
     std::cout << x << ' ' << y << "\n";
 }

moma@momavm:~/momalab/e3$ g++ test.cpp -o test

test.cpp:2:20: fatal error: e3int.h: No such file or directory
compilation terminated.

I'm writing source code and I'm trying to include the new types. When I compile my source code it fails.

 -->
